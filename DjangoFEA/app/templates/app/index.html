{% extends "app/layout.html" %}

{% block content %}

<script type="text/javascript">
    window.onload = function ()
    {
        var modelChart = document.getElementById('model_chart');
        var chart = new Chart(modelChart,
        {
            type: 'scatter',
            data: {{ chartData|safe  }},
        })
    }
</script>

<div class="jumbotron">
    <canvas id="model_chart"></canvas>
</div>

<div class="row">
    <div class="col-md-4">
        <h2>Nodes</h2>
        <div class="post" id="nodes">
            <table style="width:100%">
                <tr>
                    <th>X</th>
                    <th>Y</th>
                </tr>
                {% for node in nodes %}
                <tr>
                    <td>{{ node.x }}</td>
                    <td>{{ node.y }}</td>
                    <td>{{ node.x_boundary_condition }}</td>
                    <td>{{ node.y_boundary_condition }}</td>
                    <td>{{ node.fi_boundary_condition }}</td>
                    <td><a href="{% url 'node_delete' pk=node.pk %}">Delete</a></td>
                </tr>            
                {% endfor %}
                <tr>
                    <form method="POST" class="form" id="node-form">{% csrf_token %}
                        <td>{{ nodeForm.x }}</td>
                        <td>{{ nodeForm.y }}</td>
                        <td>{{ nodeForm.x_boundary_condition }}</td>
                        <td>{{ nodeForm.y_boundary_condition }}</td>
                        <td>{{ nodeForm.fi_boundary_condition }}</td>
                        <td><button type="submit" class="save btn btn-default" name="node">Add node</button></td>
                    </form>
                </tr>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <h2>Sections</h2>
        <div class="post" id="sections">
            <table style="width:100%">
                <tr>
                    <th>E</th>
                    <th>A</th>
                    <th>J</th>
                    <th>Ro</th>
                </tr>
                {% for section in sections %}
                <tr>
                    <td>{{ section.E }}</td>
                    <td>{{ section.A }}</td>
                    <td>{{ section.J }}</td>
                    <td>{{ section.ro }}</td>
                    <td><a href="{% url 'section_delete' pk=section.pk %}">Delete</a></td>
                </tr>            
                {% endfor %}
                <tr>
                    <form method="POST" class="form" id="section-form">{% csrf_token %}
                        <td>{{ sectionForm.E }}</td>
                        <td>{{ sectionForm.A }}</td>
                        <td>{{ sectionForm.J }}</td>
                        <td>{{ sectionForm.ro }}</td>
                        <td><button type="submit" class="save btn btn-default" name="section">Add section</button></td>
                    </form>
                </tr>
            </table>
        </div>

        <h2>Elements</h2>
        <div class="post" id="elements">
            <table style="width:100%">
                <tr>
                    <th>Section</th>
                    <th>Start</th>
                    <th>End</th>
                </tr>
                {% for element in elements %}
                <tr>
                    <td>{{ element.section }}</td>
                    <td>{{ element.node_start }}</td>
                    <td>{{ element.node_end }}</td>
                    <td>{{ element.hinge_start }}</td>
                    <td>{{ element.hinge_end }}</td>
                    <td><a href="{% url 'element_delete' pk=element.pk %}">Delete</a></td>
                </tr>            
                {% endfor %}
                <tr>
                    <form method="POST" class="form" id="element-form">{% csrf_token %}
                        <td>{{ elementForm.section }}</td>
                        <td>{{ elementForm.node_start }}</td>
                        <td>{{ elementForm.node_end }}</td>
                        <td>{{ elementForm.hinge_start }}</td>
                        <td>{{ elementForm.hinge_end }}</td>
                        <td><button type="submit" class="save btn btn-default" name="element">Add element</button></td>
                    </form>
                </tr>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <h2>Loads</h2>
        <div class="post" id="loads">
            <table style="width:100%">
                <tr>
                    <th>Element</th>
                    <th>F1</th>
                    <th>Coord</th>
                    <th>M</th>
                    <th>deg</th>
                </tr>
                {% for load in loads %}
                <tr>
                    <td>{{ load.associated_element }}</td>
                    <td>{{ load.f1 }}</td>
                    <td>{{ load.coord1 }}</td>
                    <td>{{ load.m }}</td>
                    <td>{{ load.deg }}</td>
                    <td><a href="{% url 'load_delete' pk=load.pk %}">Delete</a></td>
                </tr>            
                {% endfor %}
                <tr>
                    <form method="POST" class="form" id="load-form">{% csrf_token %}
                        <td>{{ loadForm.associated_element }}</td>
                        <td>{{ loadForm.f1 }}</td>
                        <td>{{ loadForm.coord1 }}</td>
                        <td>{{ loadForm.m }}</td>
                        <td>{{ loadForm.deg }}</td>
                        <td><button type="submit" class="save btn btn-default" name="load">Add load</button></td>
                    </form>
                </tr>
            </table>
        </div>
    </div>
</div>

{% endblock %}